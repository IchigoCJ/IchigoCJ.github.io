<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feliz Cumpleaños</title>
  <link rel="stylesheet" href="p.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Estilos para la pantalla de bienvenida */
    .welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--background-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 1s ease-out;
    }
    
    .welcome-content {
      text-align: center;
      max-width: 600px;
      padding: 40px;
      background-color: var(--light-color);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      animation: fadeIn 1.5s ease-out;
    }
    
    .welcome-title {
      font-family: "Dancing Script", cursive;
      font-size: 3rem;
      color: var(--accent-color);
      margin-bottom: 20px;
    }
    
    .welcome-message {
      font-size: 1.2rem;
      margin-bottom: 30px;
      line-height: 1.6;
    }
    
    .start-button {
      background-color: var(--accent-color);
      color: var(--light-color);
      border: none;
      padding: 15px 30px;
      font-family: "Montserrat", sans-serif;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 1px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }
    
    .start-button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transition: left 0.7s ease;
    }
    
    .start-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .start-button:hover::before {
      left: 100%;
    }
    
    /* Estilos para el control de música */
    .music-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      background-color: var(--accent-color);
      color: var(--light-color);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .music-control:hover {
      transform: scale(1.1);
    }
    
    .music-control i {
      font-size: 1.2rem;
    }
    
    /* Estilos para el contenedor de páginas */
    .page-container {
      display: none;
    }
    
    .page-container.active {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Pantalla de bienvenida -->
  <div class="welcome-screen" id="welcome-screen">
    <div class="welcome-content">
      <h1 class="welcome-title">Feliz Cumpleaños</h1>
      <p class="welcome-message">He preparado algo especial para ti. Espero te guste.</p>
      <button class="start-button" id="start-button">TE AMO :)</button>
    </div>
  </div>
  
  <!-- Audio element para reproducción -->
  <audio id="background-music" loop>
    <source src="musica.mp3" type="audio/mp3">
    Tu navegador no soporta el elemento de audio.
  </audio>
  
  <!-- Control de música -->
  <div class="music-control" id="music-control" style="display: none;">
    <i id="music-icon">♫</i>
  </div>
  
  <!-- Contenedor de la página principal -->
  <div class="page-container active" id="main-page">
    <div class="particles"></div>
    
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1 class="hero-title">Feliz Cumpleaños</h1>
        <p class="hero-subtitle">Para el amor de mi vida</p>
        <div class="scroll-indicator">
          <span>Desplázate</span>
          <div class="scroll-arrow"></div>
        </div>
      </div>
    </section>
    
    <!-- Main Content -->
    <div class="container">
      <header>
        <div class="flower-decoration left">
          <div class="flower"></div>
          <div class="flower"></div>
          <div class="flower"></div>
        </div>
        <h2 class="title">Un día especial</h2>
        <div class="flower-decoration right">
          <div class="flower"></div>
          <div class="flower"></div>
          <div class="flower"></div>
        </div>
      </header>
      
      <main>
        <div class="message-container">
          <div class="message">
            <p class="greeting">TE AMO MUCHO</p>
            <h2 class="name">MI VIDA ENTERA</h2>
            <div class="divider">
              <span class="heart">♥</span>
            </div>
            <p class="quote">
              "En este día tan especial, celebro no solo tu cumpleaños, sino cada momento que hemos compartido juntos. Eres mi razón de sonreír cada día."
            </p>
            <p class="personal-message">
              Cada instante a tu lado es un regalo, cada sonrisa tuya ilumina mi mundo, y cada recuerdo que construimos juntos es un tesoro que guardaré por siempre en mi corazón.
            </p>
          </div>
        </div>
        
        <!-- Floating Photos Section -->
        <section class="floating-photos">
          <h2 class="section-title">Nuestros Momentos</h2>
          <div class="photos-container">
            <div class="photo-item floating" style="--delay: 0s; --rotation: -5deg;">
              <img src="imagenes/pelis.jpeg" alt="Momento especial 1" class="photo-img">
              <p class="photo-caption">Noche de pelis</p>
            </div>
            <div class="photo-item floating" style="--delay: 0.5s; --rotation: 3deg;">
              <img src="imagenes/atardecer.jpeg" alt="Momento especial 2" class="photo-img">
              <p class="photo-caption">Atardecer juntos</p>
            </div>
            <div class="photo-item floating" style="--delay: 1s; --rotation: -3deg;">
              <img src="imagenes/cena.jpeg" alt="Momento especial 3" class="photo-img">
              <p class="photo-caption">Primeras fotos</p>
            </div>
            <div class="photo-item floating" style="--delay: 1.5s; --rotation: 5deg;">
              <img src="imagenes/aventuras.jpeg" alt="Momento especial 4" class="photo-img">
              <p class="photo-caption">Día de aventuras</p>
            </div>
            <div class="photo-item floating" style="--delay: 1s; --rotation: -3deg;">
              <img src="imagenes/concierto.jpeg" alt="Momento especial 3" class="photo-img">
              <p class="photo-caption">Concierto</p>
            </div>
            <div class="photo-item floating" style="--delay: 1.5s; --rotation: 5deg;">
              <img src="imagenes/playa.png" alt="Momento especial 4" class="photo-img">
              <p class="photo-caption">Playita</p>
            </div>
          </div>
        </section>
        
        <!-- Timeline Section -->
        <section class="timeline-section">
          <h2 class="section-title">Nuestra Historia</h2>
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-dot"></div>
              <div class="timeline-date">Primer encuentro</div>
              <div class="timeline-content">
                <img src="imagenes/fiesta.jpg" alt="Primer encuentro" class="timeline-img">
                <h3>Cuando nuestros caminos se cruzaron</h3>
                <p>El día que te conocí, no supe lo importante que llegarias a ser en mi vida. Tu presencia ilumina mi mundo de una manera inigualable.</p>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-dot"></div>
              <div class="timeline-date">Primera cita</div>
              <div class="timeline-content">
                <img src="imagenes/musas.jpg" alt="Primera cita" class="timeline-img">
                <h3>Nuestra primera aventura juntos</h3>
                <p>Recuerdo cada detalle de nuestra primera cita. Las risas, las conversaciones, y ese momento en que supe que quería pasar más tiempo contigo.</p>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-dot"></div>
              <div class="timeline-date"> Momentos especiales</div>
              <div class="timeline-content">
                <img src="imagenes/aventura.jpg" alt="Momentos especiales" class="timeline-img">
                <h3>Construyendo recuerdos</h3>
                <p>Cada día contigo es una nueva aventura. Hemos creado tantos recuerdos hermosos que llenan mi corazón de alegría cada vez que pienso en ellos.</p>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-dot"></div>
              <div class="timeline-date">Hoy</div>
              <div class="timeline-content">
                <img src="imagenes/cumple.jpg" alt="Celebración" class="timeline-img">
                <h3>Celebrando tu día especial</h3>
                <p>Hoy celebramos no solo tu cumpleaños, sino también todo lo que eres y lo que significas para mí.</p>
              </div>
            </div>
          </div>
        </section>
        
        <!-- Photo Gallery -->
        <section class="gallery-section">
          <h2 class="section-title">Galería de Recuerdos (DATES)</h2>
          <div class="gallery">
            <div class="gallery-item">
              <img src="imagenes/date1.jpeg" alt="Recuerdo 1" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date2.jpeg" alt="Recuerdo 2" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date3.jpeg" alt="Recuerdo 3" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date4.jpeg" alt="Recuerdo 4" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date5.jpeg" alt="Recuerdo 5" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date6.jpeg" alt="Recuerdo 6" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date7.jpeg" alt="Recuerdo 7" class="gallery-img">
            </div>
            <div class="gallery-item">
              <img src="imagenes/date8.jpeg" alt="Recuerdo 8" class="gallery-img">
            </div>
          </div>
        </section>
        
        <!-- Reasons Section -->
        <section class="reasons-section">
          <h2 class="section-title">Razones por las que te amo</h2>
          <div class="reasons-container">
            <div class="reason-card">
              <div class="reason-number">01</div>
              <h3>Tu sonrisa</h3>
              <p>Ilumina hasta mi día más oscuro y me hace sentir que a tu lado todo es posible.</p>
            </div>
            <div class="reason-card">
              <div class="reason-number">02</div>
              <h3>Tu corazón</h3>
              <p>La forma en que te preocupas por tus allegados muestra lo bello que es tu corazon.</p>
            </div>
            <div class="reason-card">
              <div class="reason-number">03</div>
              <h3>Tu inteligencia</h3>
              <p>No hay dia que no admire lo inteligente que eres.</p>
            </div>
            <div class="reason-card">
              <div class="reason-number">04</div>
              <h3>Tu risa</h3>
              <p>Es mi sonido favorito en todo el mundo.</p>
            </div>
            <div class="reason-card">
              <div class="reason-number">05</div>
              <h3>Tu compañía</h3>
              <p>Contigo, hasta los momentos más simples se vuelven extraordinarios.</p>
            </div>
            <div class="reason-card">
              <div class="reason-number">06</div>
              <h3>Tu mirada</h3>
              <p>En tus ojos encuentro mi hogar, paz y amor.</p>
            </div>
          </div>
        </section>
        
        <!-- Parallax Quote Section -->
        <section class="parallax-section">
          <div class="parallax-content">
            <h2 class="parallax-quote">"Eres eso que no sabía que me hacía falta, pero que ahora que estás, no me puedo imaginar sin ti"</h2>
          </div>
        </section>
        
        <!-- Rotating Photo Cube -->
        <section class="cube-section">
          <h2 class="section-title">Momentos Especiales</h2>
          <div class="scene"><br><br><br><br> 
            <div class="cube">
              <div class="cube-face front">
                <img src="imagenes/git1.jpeg" alt="Momento 1">
              </div>
              <div class="cube-face back">
                <img src="imagenes/git2.jpeg" alt="Momento 2">
              </div>
              <div class="cube-face right">
                <img src="imagenes/git3.jpeg" alt="Momento 3">
              </div>
              <div class="cube-face left">
                <img src="imagenes/git4.jpeg" alt="Momento 4">
              </div>
              <div class="cube-face top">
                <img src="imagenes/git5.png" alt="Momento 5">
              </div>
              <div class="cube-face bottom">
                <img src="imagenes/git6.png" alt="Momento 6">
              </div>
            </div>
          </div>
        </section>
        
        <!-- Final Message -->
        <section class="final-message">
          <div class="message-box">
            <h2>Feliz Cumpleaños, Mi Amor</h2>
            <p>Que este día sea tan especial como tú lo eres para mí. Que cada momento esté lleno de alegría, amor y felicidad. Estoy agradecido por tenerte en mi vida y por todos los hermosos recuerdos que hemos creado juntos.</p>
            <p>Te amo hoy, mañana y siempre.</p>
          </div>
        </section>
        
        <div class="button-container">
          <button class="memory-book-button" id="show-book-button">VER LIBRO DE RECUERDOS</button>
        </div>
      </main>
      
      <footer>
        <p class="footer-text">Con todo mi amor, para ti :)</p>
        <p class="date">Espero te guste</p>
      </footer>
    </div>
  </div>
  
  <!-- Contenedor de la página del libro -->
  <div class="page-container" id="book-page">
    <!-- Aquí se cargará el contenido del libro.html -->
  </div>
  
  <script src="p.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Elementos
      const welcomeScreen = document.getElementById('welcome-screen');
      const startButton = document.getElementById('start-button');
      const music = document.getElementById('background-music');
      const musicControl = document.getElementById('music-control');
      const musicIcon = document.getElementById('music-icon');
      const mainPage = document.getElementById('main-page');
      const bookPage = document.getElementById('book-page');
      const showBookButton = document.getElementById('show-book-button');
      
      // Estado
      let isMusicPlaying = false;
      
      // Verificar si es la primera vez que se carga index.html
      const isFirstVisit = sessionStorage.getItem('visitedBefore') === null;
      
      // Marcar como visitado para futuras cargas
      sessionStorage.setItem('visitedBefore', 'true');
      
      // Si es la primera visita, reiniciar la música
      if (isFirstVisit && music) {
        music.currentTime = 0;
        localStorage.setItem('musicTime', '0');
      }
      
      // Función para iniciar la experiencia
      startButton.addEventListener('click', function() {
        // Ocultar pantalla de bienvenida con animación
        welcomeScreen.style.opacity = '0';
        
        // Si es la primera visita, comenzar desde el principio
        if (isFirstVisit) {
          music.currentTime = 0;
        } else {
          // Si no es la primera visita, restaurar la posición guardada
          const savedMusicTime = localStorage.getItem('musicTime');
          if (savedMusicTime) {
            music.currentTime = parseFloat(savedMusicTime);
          }
        }
        
        // Reproducir música
        music.play()
          .then(() => {
            isMusicPlaying = true;
            musicControl.style.display = 'flex';
          })
          .catch(error => {
            console.error("Error al reproducir música:", error);
            musicControl.style.display = 'flex';
          });
        
        // Eliminar pantalla de bienvenida después de la animación
        setTimeout(() => {
          welcomeScreen.style.display = 'none';
        }, 1000);
        
        // Eliminar la bandera de "mostrar bienvenida" para esta sesión
        sessionStorage.removeItem('showWelcome');
      });
      
      // Control de música
      musicControl.addEventListener('click', function() {
        if (isMusicPlaying) {
          music.pause();
          musicIcon.textContent = '♪';
          isMusicPlaying = false;
        } else {
          music.play();
          musicIcon.textContent = '♫';
          isMusicPlaying = true;
        }
      });
      
      // Botón para mostrar el libro
      showBookButton.addEventListener('click', function() {
        // Guardar la posición actual de la música antes de navegar
        if (isMusicPlaying) {
          localStorage.setItem('musicTime', music.currentTime);
          localStorage.setItem('musicPlaying', 'true');
        } else {
          localStorage.setItem('musicPlaying', 'false');
        }
        
        // Establecer bandera para mostrar la pantalla de bienvenida en la próxima carga
        sessionStorage.setItem('showWelcome', 'true');
        
        // Navegar directamente a la página del libro
        window.location.href = 'libro.html';
      });
      
      // Guardar la posición actual de la música
      window.addEventListener('beforeunload', function() {
        if (!isMusicPlaying) {
          localStorage.setItem('musicPlaying', 'false');
          return;
        }
        
        localStorage.setItem('musicTime', music.currentTime);
        localStorage.setItem('musicPlaying', 'true');
        
        // Establecer bandera para mostrar la pantalla de bienvenida en la próxima carga
        sessionStorage.setItem('showWelcome', 'true');
      });
      
      // Verificar si debemos mostrar la pantalla de bienvenida
      const showWelcome = sessionStorage.getItem('showWelcome');
      
      // Si no hay bandera o la bandera indica mostrar, mostramos la pantalla de bienvenida
      if (showWelcome === null || showWelcome === 'true') {
        welcomeScreen.style.display = 'flex';
      } else {
        // Si la bandera indica no mostrar, ocultamos la pantalla y restauramos la música
        welcomeScreen.style.display = 'none';
        
        // Restaurar la posición de la música
        const savedMusicTime = localStorage.getItem('musicTime');
        const savedMusicPlaying = localStorage.getItem('musicPlaying');
        
        if (savedMusicPlaying === 'true' && savedMusicTime) {
          music.currentTime = parseFloat(savedMusicTime);
          music.play()
            .then(() => {
              isMusicPlaying = true;
              musicControl.style.display = 'flex';
            })
            .catch(error => {
              console.error("Error al restaurar música:", error);
              musicControl.style.display = 'flex';
            });
        }
      }
    });
  </script>
</body>
</html>
